var rt=Object.defineProperty;var st=(i,t,e)=>t in i?rt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var b=(i,t,e)=>(st(i,typeof t!="symbol"?t+"":t,e),e);var X={exports:{}};(function(i){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(u,o,l){this.fn=u,this.context=o,this.once=l||!1}function n(u,o,l,d,g){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new s(l,d||u,g),c=e?e+o:o;return u._events[c]?u._events[c].fn?u._events[c]=[u._events[c],p]:u._events[c].push(p):(u._events[c]=p,u._eventsCount++),u}function a(u,o){--u._eventsCount===0?u._events=new r:delete u._events[o]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var o=[],l,d;if(this._eventsCount===0)return o;for(d in l=this._events)t.call(l,d)&&o.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(l)):o},h.prototype.listeners=function(o){var l=e?e+o:o,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,p=d.length,c=new Array(p);g<p;g++)c[g]=d[g].fn;return c},h.prototype.listenerCount=function(o){var l=e?e+o:o,d=this._events[l];return d?d.fn?1:d.length:0},h.prototype.emit=function(o,l,d,g,p,c){var x=e?e+o:o;if(!this._events[x])return!1;var f=this._events[x],w=arguments.length,m,y;if(f.fn){switch(f.once&&this.removeListener(o,f.fn,void 0,!0),w){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,l),!0;case 3:return f.fn.call(f.context,l,d),!0;case 4:return f.fn.call(f.context,l,d,g),!0;case 5:return f.fn.call(f.context,l,d,g,p),!0;case 6:return f.fn.call(f.context,l,d,g,p,c),!0}for(y=1,m=new Array(w-1);y<w;y++)m[y-1]=arguments[y];f.fn.apply(f.context,m)}else{var I=f.length,M;for(y=0;y<I;y++)switch(f[y].once&&this.removeListener(o,f[y].fn,void 0,!0),w){case 1:f[y].fn.call(f[y].context);break;case 2:f[y].fn.call(f[y].context,l);break;case 3:f[y].fn.call(f[y].context,l,d);break;case 4:f[y].fn.call(f[y].context,l,d,g);break;default:if(!m)for(M=1,m=new Array(w-1);M<w;M++)m[M-1]=arguments[M];f[y].fn.apply(f[y].context,m)}}return!0},h.prototype.on=function(o,l,d){return n(this,o,l,d,!1)},h.prototype.once=function(o,l,d){return n(this,o,l,d,!0)},h.prototype.removeListener=function(o,l,d,g){var p=e?e+o:o;if(!this._events[p])return this;if(!l)return a(this,p),this;var c=this._events[p];if(c.fn)c.fn===l&&(!g||c.once)&&(!d||c.context===d)&&a(this,p);else{for(var x=0,f=[],w=c.length;x<w;x++)(c[x].fn!==l||g&&!c[x].once||d&&c[x].context!==d)&&f.push(c[x]);f.length?this._events[p]=f.length===1?f[0]:f:a(this,p)}return this},h.prototype.removeAllListeners=function(o){var l;return o?(l=e?e+o:o,this._events[l]&&a(this,l)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,i.exports=h})(X);var H=X.exports;const Y=class extends X.exports.EventEmitter{constructor(t,e){super(),this.gl=t,this.src=e,this.width=1,this.height=1,this.texture=t.createTexture(),this.texture.image=new Image,this.texture.image.onload=this._handleLoad.bind(this),this.texture.image.src=e}_handleLoad(){this.update(),this.emit("load")}update(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.texture.image),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.width=this.texture.image.width,this.height=this.texture.image.height}static FromURL(t,e){let r=B.get(e);return r||(r=new Y(t,e),B.add(e,r)),r}};let k=Y;b(k,"BLEND_TYPE",{NORMAL:0,ADDITIVE:1,MULTIPLY:2});class B{static get(t){return this.textures[t]?this.textures[t]:null}static add(t,e){this.textures[t]?console.warn("Texture already exists in cache."):this.textures[t]=e}static remove(t){this.textures[t]?delete this.textures[t]:console.warn("Texture does not exist in cache.")}static clear(){this.textures={}}}b(B,"textures",{});const K=class extends H{constructor(t){super(),this.deltaTime=0,this.deltaMS=1,this.elapsedMS=0,this.lastTime=0,this.timeScale=1,this.started=!1,this.paused=!1,this.autoStart=t.autoStart||!1,this.autoStart&&this.start()}start(){this.emit("start"),this.lastTime=performance.now(),this.started=!0,requestAnimationFrame(this.update.bind(this))}stop(){this.emit("stop"),this.started=!1}update(){if(!this.started||this.paused||this.timeScale===0)return;const t=performance.now();if(t>this.lastTime){if(this.elapsedMS=t-this.lastTime,this.elapsedMS>this._maxElapsedMS&&(this.elapsedMS=this._maxElapsedMS),this.timeScale!==1&&(this.elapsedMS*=this.timeScale),this._minElapsedMS){const e=this.currentTime-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=this.currentTime-e%this._minElapsedMS}this.deltaMS=this.elapsedMS,this.deltaTime=this.elapsedMS/1e3,this.emit("tick",this.deltaTime,this.deltaMS)}else this.elapsedMS=0,this.deltaMS=0;this.lastTime=t,requestAnimationFrame(this.update.bind(this))}pause(){return this.paused=!0,this.emit("pause"),this}resume(){return this.paused=!1,this.emit("resume"),this}add(t,e){return this.on("tick",t,e),this}get FPS(){return Math.round(1e3/this.elapsedMS)}get minFPS(){return Math.round(1e3/this._maxElapsedMS)}set minFPS(t){const e=Math.min(this.maxFPS,t);this._maxElapsedMS=1e3/e}get maxFPS(){return Math.round(1e3/this._minElapsedMS)}set maxFPS(t){t===0?this._minElapsedMS=0:this._minElapsedMS=1e3/t}};let L=K;b(L,"SharedTicker",new K({autoStart:!0}));const nt=Math.PI/180,ht=180/Math.PI;function _(i,t,e){return i<t?t:i>e?e:+i}function N(i,t){return~~(Math.random()*(t-i))+i}class at{constructor(){this.objectClass={},this.instanceCounter=0}register(t,e,r=!1){if(typeof e!="undefined")this.objectClass[t]={class:e,pool:r?[]:void 0};else throw new Error(`Cannot register object '${t}', invalid class`)}pull(t,...e){const r=this.objectClass[t];if(r){const s=r.class,n=r.pool;let a;return n&&(a=n.pop())?(e.shift(),typeof a.onResetEvent=="function"&&a.onResetEvent.apply(a,e),this.instanceCounter--):(e[0]=s,a=new(s.bind.apply(s,e)),n&&(a.className=t)),a}throw new Error(`Cannot instantiate object of type '${t}'`)}purge(){for(const t in this.objectClass)this.objectClass[t]&&(this.objectClass[t].pool=[]);this.instanceCounter=0}push(t,e=!0){if(!this.poolable(t)){if(e===!0)throw new Error(`me.pool: object ${t} cannot be recycled`);return!1}return this.objectClass[t.className].pool.push(t),this.instanceCounter++,!0}exists(t){return t in this.objectClass}poolable(t){const{className:e}=t;return typeof e!="undefined"&&typeof t.onResetEvent=="function"&&e in this.objectClass&&this.objectClass[e].pool!=="undefined"}getInstanceCount(){return this.instanceCounter}}const D=new at;var E=function(i){return"0123456789ABCDEF".charAt(i-i%16>>4)+"0123456789ABCDEF".charAt(i%16)},lt=/^rgba?\((\d+), ?(\d+), ?(\d+)(, ?([\d.]+))?\)$/,ot=/^#([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,ut=/^#([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,dt=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,ft=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,q=new Map;[["black",[0,0,0]],["silver",[192,192,129]],["gray",[128,128,128]],["white",[255,255,255]],["maroon",[128,0,0]],["red",[255,0,0]],["purple",[128,0,128]],["fuchsia",[255,0,255]],["green",[0,128,0]],["lime",[0,255,0]],["olive",[128,128,0]],["yellow",[255,255,0]],["navy",[0,0,128]],["blue",[0,0,255]],["teal",[0,128,128]],["aqua",[0,255,255]],["orange",[255,165,0]],["aliceblue",[240,248,245]],["antiquewhite",[250,235,215]],["aquamarine",[127,255,212]],["azure",[240,255,255]],["beige",[245,245,220]],["bisque",[255,228,196]],["blanchedalmond",[255,235,205]],["blueviolet",[138,43,226]],["brown",[165,42,42]],["burlywood",[222,184,35]],["cadetblue",[95,158,160]],["chartreuse",[127,255,0]],["chocolate",[210,105,30]],["coral",[255,127,80]],["cornflowerblue",[100,149,237]],["cornsilk",[255,248,220]],["crimson",[220,20,60]],["darkblue",[0,0,139]],["darkcyan",[0,139,139]],["darkgoldenrod",[184,134,11]],["darkgray[*]",[169,169,169]],["darkgreen",[0,100,0]],["darkgrey[*]",[169,169,169]],["darkkhaki",[189,183,107]],["darkmagenta",[139,0,139]],["darkolivegreen",[85,107,47]],["darkorange",[255,140,0]],["darkorchid",[153,50,204]],["darkred",[139,0,0]],["darksalmon",[233,150,122]],["darkseagreen",[143,188,143]],["darkslateblue",[72,61,139]],["darkslategray",[47,79,79]],["darkslategrey",[47,79,79]],["darkturquoise",[0,206,209]],["darkviolet",[148,0,211]],["deeppink",[255,20,147]],["deepskyblue",[0,191,255]],["dimgray",[105,105,105]],["dimgrey",[105,105,105]],["dodgerblue",[30,144,255]],["firebrick",[178,34,34]],["floralwhite",[255,250,240]],["forestgreen",[34,139,34]],["gainsboro",[220,220,220]],["ghostwhite",[248,248,255]],["gold",[255,215,0]],["goldenrod",[218,165,32]],["greenyellow",[173,255,47]],["grey",[128,128,128]],["honeydew",[240,255,240]],["hotpink",[255,105,180]],["indianred",[205,92,92]],["indigo",[75,0,130]],["ivory",[255,255,240]],["khaki",[240,230,140]],["lavender",[230,230,250]],["lavenderblush",[255,240,245]],["lawngreen",[124,252,0]],["lemonchiffon",[255,250,205]],["lightblue",[173,216,230]],["lightcoral",[240,128,128]],["lightcyan",[224,255,255]],["lightgoldenrodyellow",[250,250,210]],["lightgray",[211,211,211]],["lightgreen",[144,238,144]],["lightgrey",[211,211,211]],["lightpink",[255,182,193]],["lightsalmon",[255,160,122]],["lightseagreen",[32,178,170]],["lightskyblue",[135,206,250]],["lightslategray",[119,136,153]],["lightslategrey",[119,136,153]],["lightsteelblue",[176,196,222]],["lightyellow",[255,255,224]],["limegreen",[50,205,50]],["linen",[250,240,230]],["mediumaquamarine",[102,205,170]],["mediumblue",[0,0,205]],["mediumorchid",[186,85,211]],["mediumpurple",[147,112,219]],["mediumseagreen",[60,179,113]],["mediumslateblue",[123,104,238]],["mediumspringgreen",[0,250,154]],["mediumturquoise",[72,209,204]],["mediumvioletred",[199,21,133]],["midnightblue",[25,25,112]],["mintcream",[245,255,250]],["mistyrose",[255,228,225]],["moccasin",[255,228,181]],["navajowhite",[255,222,173]],["oldlace",[253,245,230]],["olivedrab",[107,142,35]],["orangered",[255,69,0]],["orchid",[218,112,214]],["palegoldenrod",[238,232,170]],["palegreen",[152,251,152]],["paleturquoise",[175,238,238]],["palevioletred",[219,112,147]],["papayawhip",[255,239,213]],["peachpuff",[255,218,185]],["peru",[205,133,63]],["pink",[255,192,203]],["plum",[221,160,221]],["powderblue",[176,224,230]],["rosybrown",[188,143,143]],["royalblue",[65,105,225]],["saddlebrown",[139,69,19]],["salmon",[250,128,114]],["sandybrown",[244,164,96]],["seagreen",[46,139,87]],["seashell",[255,245,238]],["sienna",[160,82,45]],["skyblue",[135,206,235]],["slateblue",[106,90,205]],["slategray",[112,128,144]],["slategrey",[112,128,144]],["snow",[255,250,250]],["springgreen",[0,255,127]],["steelblue",[70,130,180]],["tan",[210,180,140]],["thistle",[216,191,216]],["tomato",[255,99,71]],["turquoise",[64,224,208]],["violet",[238,130,238]],["wheat",[245,222,179]],["whitesmoke",[245,245,245]],["yellowgreen",[154,205,50]]].forEach(function(i){q.set(i[0],i[1])});class v{static get WHITE(){return new v(255,255,255)}static get BLACK(){return new v(0,0,0)}static get RED(){return new v(255,0,0)}static get GREEN(){return new v(0,255,0)}static get BLUE(){return new v(0,0,255)}static get YELLOW(){return new v(255,255,0)}static get CYAN(){return new v(0,255,255)}static get MAGENTA(){return new v(255,0,255)}static get TRANSPARENT(){return new v(0,0,0,0)}constructor(t=0,e=0,r=0,s=1){this.onResetEvent(t,e,r,s)}onResetEvent(t=0,e=0,r=0,s=1){return typeof this.glArray=="undefined"&&(this.glArray=new Float32Array([0,0,0,1])),this.setColor(t,e,r,s)}get r(){return~~(this.glArray[0]*255)}set r(t){this.glArray[0]=_(~~t||0,0,255)/255}get g(){return~~(this.glArray[1]*255)}set g(t){this.glArray[1]=_(~~t||0,0,255)/255}get b(){return~~(this.glArray[2]*255)}set b(t){this.glArray[2]=_(~~t||0,0,255)/255}get alpha(){return this.glArray[3]}set alpha(t){this.glArray[3]=typeof t=="undefined"?1:_(+t,0,1)}setColor(t,e,r,s=1){return this.r=t,this.g=e,this.b=r,this.alpha=s,this}clone(){return D.pull("Color").copy(this)}copy(t){return t instanceof v?(this.glArray.set(t.glArray),this):this.parseCSS(t)}add(t){return this.glArray[0]=_(this.glArray[0]+t.glArray[0],0,1),this.glArray[1]=_(this.glArray[1]+t.glArray[1],0,1),this.glArray[2]=_(this.glArray[2]+t.glArray[2],0,1),this.glArray[3]=(this.glArray[3]+t.glArray[3])/2,this}darken(t){return t=_(t,0,1),this.glArray[0]*=t,this.glArray[1]*=t,this.glArray[2]*=t,this}lerp(t,e){return e=_(e,0,1),this.glArray[0]+=(t.glArray[0]-this.glArray[0])*e,this.glArray[1]+=(t.glArray[1]-this.glArray[1])*e,this.glArray[2]+=(t.glArray[2]-this.glArray[2])*e,this}lighten(t){return t=_(t,0,1),this.glArray[0]=_(this.glArray[0]+(1-this.glArray[0])*t,0,1),this.glArray[1]=_(this.glArray[1]+(1-this.glArray[1])*t,0,1),this.glArray[2]=_(this.glArray[2]+(1-this.glArray[2])*t,0,1),this}random(t=0,e=255){return t<0&&(t=0),e>255&&(e=255),this.setColor(N(t,e),N(t,e),N(t,e),this.alpha)}equals(t){return this.glArray[0]===t.glArray[0]&&this.glArray[1]===t.glArray[1]&&this.glArray[2]===t.glArray[2]&&this.glArray[3]===t.glArray[3]}parseCSS(t){return q.has(t)?this.setColor.apply(this,q.get(t)):this.parseRGB(t)}parseRGB(t){var e=lt.exec(t);return e?this.setColor(+e[1],+e[2],+e[3],+e[5]):this.parseHex(t)}parseHex(t,e=!1){var r;if(r=ft.exec(t))return this.setColor(parseInt(r[e===!1?1:2],16),parseInt(r[e===!1?2:3],16),parseInt(r[e===!1?3:4],16),(_(parseInt(r[e===!1?4:1],16),0,255)/255).toFixed(1));if(r=dt.exec(t))return this.setColor(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16));if(r=ut.exec(t)){var s=r[e===!1?1:2],n=r[e===!1?2:3],a=r[e===!1?3:4],h=r[e===!1?4:1];return this.setColor(parseInt(s+s,16),parseInt(n+n,16),parseInt(a+a,16),(_(parseInt(h+h,16),0,255)/255).toFixed(1))}if(r=ot.exec(t))return this.setColor(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16));throw new Error(`invalid parameter: ${t}`)}toUint32(t=this.alpha){var e=this.r&255,r=this.g&255,s=this.b&255,n=t*255&255;return(n<<24)+(e<<16)+(r<<8)+s}toArray(){return this.glArray}toHex(){return`#${E(this.r)}${E(this.g)}${E(this.b)}`}toHex8(){return`#${E(this.r)}${E(this.g)}${E(this.b)}${E(this.alpha*255)}`}toRGB(){return`rgb(${this.r},${this.g},${this.b})`}toRGBA(){return`rgba(${this.r},${this.g},${this.b},${this.alpha})`}}class T{constructor(t=0,e=0){this.onResetEvent(t,e)}onResetEvent(t=0,e=0){return this.x=t,this.y=e,this}_set(t,e){return this.x=t,this.y=e,this}set(t,e){if(t!==+t||e!==+e)throw new Error("invalid x,y parameters (not a number)");return this._set(t,e)}setZero(){return this.set(0,0)}setV(t){return this._set(t.x,t.y)}add(t){return this._set(this.x+t.x,this.y+t.y)}sub(t){return this._set(this.x-t.x,this.y-t.y)}scale(t,e){return this._set(this.x*t,this.y*(typeof e!="undefined"?e:t))}toIso(){return this._set(this.x-this.y,(this.x+this.y)*.5)}to2d(){return this._set(this.y+this.x/2,this.y-this.x/2)}scaleV(t){return this._set(this.x*t.x,this.y*t.y)}div(t){return this._set(this.x/t,this.y/t)}abs(){return this._set(this.x<0?-this.x:this.x,this.y<0?-this.y:this.y)}clamp(t,e){return new T(_(this.x,t,e),_(this.y,t,e))}clampSelf(t,e){return this._set(_(this.x,t,e),_(this.y,t,e))}minV(t){return this._set(this.x<t.x?this.x:t.x,this.y<t.y?this.y:t.y)}maxV(t){return this._set(this.x>t.x?this.x:t.x,this.y>t.y?this.y:t.y)}floor(){return new T(Math.floor(this.x),Math.floor(this.y))}floorSelf(){return this._set(Math.floor(this.x),Math.floor(this.y))}ceil(){return new T(Math.ceil(this.x),Math.ceil(this.y))}ceilSelf(){return this._set(Math.ceil(this.x),Math.ceil(this.y))}negate(){return new T(-this.x,-this.y)}negateSelf(){return this._set(-this.x,-this.y)}copy(t){return this._set(t.x,t.y)}equals(...t){var e,r;return t.length===2?(e=t[0],r=t[1]):(e=t[0].x,r=t[0].y),this.x===e&&this.y===r}normalize(){return this.div(this.length()||1)}perp(){return this._set(this.y,-this.x)}rotate(t,e){var r=0,s=0;typeof e=="object"&&(r=e.x,s=e.y);var n=this.x-r,a=this.y-s,h=Math.cos(t),u=Math.sin(t);return this._set(n*h-a*u+r,n*u+a*h+s)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}length2(){return this.dot(this)}length(){return Math.sqrt(this.length2())}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}distance(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}angle(t){return Math.acos(_(this.dot(t)/(this.length()*t.length()),-1,1))}project(t){return this.scale(this.dot(t)/t.length2())}projectN(t){return this.scale(this.dot(t))}multiply(...t){var e,r;return t.length===2?(e=t[0],r=t[1]):(e=t[0].x,r=t[0].y),this._set(this.x*e,this.y*r)}clone(){let t=D.pull("Vector2",this.x,this.y);return t.x=this.x,t.y=this.y,t}toString(){return`x:${this.x},y:${this.y}`}}function ct(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i}function pt(i,t){var e=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],u=t[6],o=t[7],l=t[8],d=l*a-h*o,g=-l*n+h*u,p=o*n-a*u,c=e*d+r*g+s*p;return c?(c=1/c,i[0]=d*c,i[1]=(-l*r+s*o)*c,i[2]=(h*r-s*a)*c,i[3]=g*c,i[4]=(l*e-s*u)*c,i[5]=(-h*e+s*n)*c,i[6]=p*c,i[7]=(-o*e+r*u)*c,i[8]=(a*e-r*n)*c,i):null}function Z(i,t,e){var r=t[0],s=t[1],n=t[2],a=t[3],h=t[4],u=t[5],o=t[6],l=t[7],d=t[8],g=e[0],p=e[1],c=e[2],x=e[3],f=e[4],w=e[5],m=e[6],y=e[7],I=e[8];return i[0]=g*r+p*a+c*o,i[1]=g*s+p*h+c*l,i[2]=g*n+p*u+c*d,i[3]=x*r+f*a+w*o,i[4]=x*s+f*h+w*l,i[5]=x*n+f*u+w*d,i[6]=m*r+y*a+I*o,i[7]=m*s+y*h+I*l,i[8]=m*n+y*u+I*d,i}function gt(i,t,e){var r=t[0],s=t[1],n=t[2],a=t[3],h=t[4],u=t[5],o=t[6],l=t[7],d=t[8],g=e[0],p=e[1];return i[0]=r,i[1]=s,i[2]=n,i[3]=a,i[4]=h,i[5]=u,i[6]=g*r+p*a+o,i[7]=g*s+p*h+l,i[8]=g*n+p*u+d,i}function yt(i,t,e){var r=t[0],s=t[1],n=t[2],a=t[3],h=t[4],u=t[5],o=t[6],l=t[7],d=t[8],g=Math.sin(e),p=Math.cos(e);return i[0]=p*r+g*a,i[1]=p*s+g*h,i[2]=p*n+g*u,i[3]=p*a-g*r,i[4]=p*h-g*s,i[5]=p*u-g*n,i[6]=o,i[7]=l,i[8]=d,i}function _t(i,t,e){var r=e[0],s=e[1];return i[0]=r*t[0],i[1]=r*t[1],i[2]=r*t[2],i[3]=s*t[3],i[4]=s*t[4],i[5]=s*t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i}function xt(i,t,e){return i[0]=2/t,i[1]=0,i[2]=0,i[3]=0,i[4]=-2/e,i[5]=0,i[6]=-1,i[7]=1,i[8]=1,i}class P{constructor(){this.array=new Float32Array(9),this.identity()}projection(t,e){return xt(this.array,t,e),this}fromArray(t){this.array.set(t)}toArray(t){return t===void 0&&t.set(this.array),this.array}identity(){return ct(this.array),this}multiply(t){return Z(this.array,this.array,t.array),this}copyTo(t){return t.array.set(this.array),t}copyFrom(t){return this.array.set(t.array),this}invert(){return pt(this.array,this.array),this}apply(t){return this.translate(t),this}scale(t,e){var r=t,s=typeof e=="undefined"?r:e;return _t(this.array,this.array,[r,s]),this}rotate(t){return yt(this.array,this.array,t),this}translate(...t){var e,r;return arguments.length===2?(e=t[0],r=t[1]):(e=t[0].x,r=t[0].y),gt(this.array,this.array,[e,r]),this}isIdentity(){var t=this.array;return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===0&&t[4]===1&&t[5]===0&&t[6]===0&&t[7]===0&&t[8]===1}equals(t){var e=t.array,r=this.array;return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}multiplyVector2(t){let e=new T;return e.x=this.array[0]*t.x+this.array[1]*t.y+this.array[2],e.y=this.array[3]*t.x+this.array[4]*t.y+this.array[5],e}clone(){return D.pull("Matrix2",this)}append(t){return Z(this.array,this.array,t.array),this}toString(){var t=this.array;return`Matrix2(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]}, ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}, ${t[8]})`}}class vt{constructor(t,e=!1,r=!1){this._projection=t,this.worldTransform=new P().identity(),this._originWorldTransform=new P().identity(),this.localTransform=new P().identity(),this._originLocalTransform=new P().identity(),this.position=new T,this.scale=new T(1,1),this.pivot=new T,e&&(this.isTexture=!0,this.pivot.set(.5,.5)),this.isText=r,this._rotation=0,this._width=0,this._height=0,this._wPivot=0,this._hPivot=0,this.isDirty=!0,this.parent=null}onChange(){}toString(){return`[math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) ]`}updateLocalTransform(){const t=this.localTransform;t.copyFrom(this._originLocalTransform),t.translate(this.pivot),t.translate(this.position),t.rotate(this._rotation),t.scale((this._width||1)*this.scale.x,(this._height||1)*this.scale.y),this.isText&&t.scale(-1,1),t.translate(-this.pivot.x,-this.pivot.y)}updateTextureMatrix(){}updateTransform(t){const e=this.localTransform;if(this.updateLocalTransform(),t){let r=this.worldTransform;r.copyFrom(this.parent.worldTransform),r.translate(this.pivot.x,this.pivot.y),r.translate(this.position.x/(this.parent.width||1),this.position.y/(this.parent.height||1)),r.scale((this._width||1)*this.scale.x/(this.parent.width||1),(this._height||1)*this.scale.y/(this.parent.height||1)),r.rotate(this._rotation),this.isText&&r.scale(-1,1),r.translate(-this.pivot.x,-this.pivot.y)}else this.worldTransform.copyFrom(e)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.isDirty=!0)}get width(){return this._width}set width(t){this._width!==t&&(this._width=t,this.isDirty=!0)}get height(){return this._height}set height(t){this._height!==t&&(this._height=t,this.isDirty=!0)}get projection(){return this._projection}set projection(t){t&&this._projection!==t&&(this._projection=t,this._originLocalTransform.identity().multiply(this._projection),this._originWorldTransform.identity().multiply(this._projection),this.isDirty=!0)}set textureMode(t){typeof t=="boolean"&&(this.isTexture=t,t&&(this.isTexture=!0,this.pivot.set(.5,.5)))}get globalPosition(){return this.parent?this.parent.globalPosition.add(this.position):this.position.clone()}get globalScale(){return this.parent?this.parent.globalScale.multiply(this.scale):this.scale.clone()}get globalRotation(){return this.parent?this.parent.globalRotation+this.rotation:this.rotation}get globalAlpha(){return this.parent?this.parent.globalAlpha*this.alpha:this.alpha}get globalPivot(){return this.parent?this.parent.globalPivot.add(this.pivot):this.pivot.clone()}}class J extends H{constructor(){super(),this.transform=new vt,this.alpha=1,this.visible=!0,this.renderable=!0,this._parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1,this.children=[],this.gl=U.Core.gl,this.initialized=!1}_initBeforeFirstRender(){this.transform.projection||this.resetProjection()}get destroyed(){return this._destroyed}updateTransform(){var t,e,r;this.initialized||(this._initBeforeFirstRender(),this.initialized=!0),this.transform.isDirty&&this.transform.updateTransform((t=this.parent)==null?void 0:t.transform,(e=this.parent)==null?void 0:e.globalPosition),this.worldAlpha=this.alpha*(((r=this.parent)==null?void 0:r.worldAlpha)||1),this.children.forEach(s=>{s.updateTransform()})}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}destroy(){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,this.children.push(e),this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),s=this.getChildIndex(e);this.children[r]=e,this.children[s]=t,this.onChildrenChange(r<s?r:s)}onChildrenChange(t){}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`${t}setChildIndex: Index ${e} is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);z(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(r===-1)return null;e.parent=null,z(this.children,r,1),this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,z(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,s=e,n=s-r;let a;if(n>0&&n<=s){a=this.children.splice(r,n);for(let h=0;h<a.length;++h)a[h].parent=null;this.onChildrenChange(t);for(let h=0;h<a.length;++h)a[h].emit("removed",this),this.emit("childRemoved",a[h],this,h);return a}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const s=this.children[e];s._lastSortedIndex=e,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(wt),this.sortDirty=!1}render(){if(!(this.visible===!1||this.alpha===0||!this.renderable)){this._render();for(let t=0,e=this.children.length;t<e;++t)this.children[t].render()}}_render(){}resetProjection(){this.transform.projection?this.transform.projection.identity().projection(this.gl.canvas.width,this.gl.canvas.height):this.transform.projection=new P().projection(this.gl.canvas.width,this.gl.canvas.height),this.children.forEach(t=>{t.resetProjection()})}get x(){return this.transform.position.x}set x(t){this.transform.position.x=t}get y(){return this.transform.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get position(){return this.transform.position}set position(t){this.transform.position.copy(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copy(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copy(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*ht}set angle(t){this.transform.rotation=t*nt}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t}get globalPosition(){return this.transform.globalPosition}get globalScale(){return this.transform.globalScale}get globalRotation(){return this.transform.globalRotation}get parent(){return this._parent}set parent(t){t!==this._parent&&(this._parent=t,this.transform.parent=t?t.transform:null)}}function wt(i,t){return i.zIndex===t.zIndex?i._lastSortedIndex-t._lastSortedIndex:i.zIndex-t.zIndex}function z(i,t,e){const r=i.length;let s;if(t>=r||e===0)return;e=t+e>r?r-t:e;const n=r-e;for(s=t;s<n;++s)i[s]=i[s+e];i.length=n}class mt{static get GL(){return this._gl}constructor(){this.gl=null}init(t){if(typeof t=="string")t=document.getElementById(t);else if(!t)t=document.createElement("canvas"),t.id="canvas",document.body.appendChild(t);else if(typeof t!==HTMLCanvasElement)throw new Error("The canvas parameter must be a HTMLCanvasElement or a string.");if(this.gl=t.getContext("webgl2"),!this.gl)throw new Error("Could not initialise WebGL, sorry :-(")}clearCanvas(t=v.BLACK){this.gl.clearColor(t.glArray[0],t.glArray[1],t.glArray[2],t.glArray[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}setViewport(t,e,r,s){this.gl.viewport(t,e,r,s)}}var j={Linear:{None:function(i){return i}},Quadratic:{In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}},Cubic:{In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}},Quartic:{In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}},Quintic:{In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}},Sinusoidal:{In:function(i){return 1-Math.cos(i*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.cos(Math.PI*i))}},Exponential:{In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}},Circular:{In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}},Elastic:{In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}},Back:{In:function(i){var t=1.70158;return i*i*((t+1)*i-t)},Out:function(i){var t=1.70158;return--i*i*((t+1)*i+t)+1},InOut:function(i){var t=2.5949095;return(i*=2)<1?.5*(i*i*((t+1)*i-t)):.5*((i-=2)*i*((t+1)*i+t)+2)}},Bounce:{In:function(i){return 1-j.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?j.Bounce.In(i*2)*.5:j.Bounce.Out(i*2-1)*.5+.5}}},F;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?F=function(){var i=process.hrtime();return i[0]*1e3+i[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?F=self.performance.now.bind(self.performance):Date.now!==void 0?F=Date.now:F=function(){return new Date().getTime()};var C=F,et=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(e){return t._tweens[e]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},i.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},i.prototype.update=function(t,e){t===void 0&&(t=C()),e===void 0&&(e=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<r.length;s++){var n=this._tweens[r[s]],a=!e;n&&n.update(t,a)===!1&&!e&&delete this._tweens[r[s]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),S={Linear:function(i,t){var e=i.length-1,r=e*t,s=Math.floor(r),n=S.Utils.Linear;return t<0?n(i[0],i[1],r):t>1?n(i[e],i[e-1],e-r):n(i[s],i[s+1>e?e:s+1],r-s)},Bezier:function(i,t){for(var e=0,r=i.length-1,s=Math.pow,n=S.Utils.Bernstein,a=0;a<=r;a++)e+=s(1-t,r-a)*s(t,a)*i[a]*n(r,a);return e},CatmullRom:function(i,t){var e=i.length-1,r=e*t,s=Math.floor(r),n=S.Utils.CatmullRom;return i[0]===i[e]?(t<0&&(s=Math.floor(r=e*(1+t))),n(i[(s-1+e)%e],i[s],i[(s+1)%e],i[(s+2)%e],r-s)):t<0?i[0]-(n(i[0],i[0],i[1],i[1],-r)-i[0]):t>1?i[e]-(n(i[e],i[e],i[e-1],i[e-1],r-e)-i[e]):n(i[s?s-1:0],i[s],i[e<s+1?e:s+1],i[e<s+2?e:s+2],r-s)},Utils:{Linear:function(i,t,e){return(t-i)*e+i},Bernstein:function(i,t){var e=S.Utils.Factorial;return e(i)/e(t)/e(i-t)},Factorial:function(){var i=[1];return function(t){var e=1;if(i[t])return i[t];for(var r=t;r>1;r--)e*=r;return i[t]=e,e}}(),CatmullRom:function(i,t,e,r,s){var n=(e-i)*.5,a=(r-t)*.5,h=s*s,u=s*h;return(2*t-2*e+n+a)*u+(-3*t+3*e-2*n-a)*h+n*s+t}}},W=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),it=new et,Tt=function(){function i(t,e){e===void 0&&(e=it),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=j.Linear.None,this._interpolationFunction=S.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=W.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),e!==void 0&&(this._duration=e),this},i.prototype.duration=function(t){return this._duration=t,this},i.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var e in this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t!==void 0?typeof t=="string"?C()+parseFloat(t):t:C(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},i.prototype._setupProperties=function(t,e,r,s){for(var n in r){var a=t[n],h=Array.isArray(a),u=h?"array":typeof a,o=!h&&Array.isArray(r[n]);if(!(u==="undefined"||u==="function")){if(o){var l=r[n];if(l.length===0)continue;l=l.map(this._handleRelativeValue.bind(this,a)),r[n]=[a].concat(l)}if((u==="object"||h)&&a&&!o){e[n]=h?[]:{};for(var d in a)e[n][d]=a[d];s[n]=h?[]:{},this._setupProperties(a,e[n],r[n],s[n])}else typeof e[n]=="undefined"&&(e[n]=a),h||(e[n]*=1),o?s[n]=r[n].slice().reverse():s[n]=e[n]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(t){return t===void 0&&(t=C()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},i.prototype.resume=function(t){return t===void 0&&(t=C()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},i.prototype.group=function(t){return this._group=t,this},i.prototype.delay=function(t){return this._delayTime=t,this},i.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},i.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},i.prototype.yoyo=function(t){return this._yoyo=t,this},i.prototype.easing=function(t){return this._easingFunction=t,this},i.prototype.interpolation=function(t){return this._interpolationFunction=t,this},i.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},i.prototype.onStart=function(t){return this._onStartCallback=t,this},i.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},i.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},i.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},i.prototype.onStop=function(t){return this._onStopCallback=t,this},i.prototype.update=function(t,e){if(t===void 0&&(t=C()),e===void 0&&(e=!0),this._isPaused)return!0;var r,s,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>n)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),s=(t-this._startTime)/this._duration,s=this._duration===0||s>1?1:s;var a=this._easingFunction(s);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,s),s===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,u=this._chainedTweens.length;h<u;h++)this._chainedTweens[h].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(t,e,r,s){for(var n in r)if(e[n]!==void 0){var a=e[n]||0,h=r[n],u=Array.isArray(t[n]),o=Array.isArray(h),l=!u&&o;l?t[n]=this._interpolationFunction(h,s):typeof h=="object"&&h?this._updateProperties(t[n],a,h,s):(h=this._handleRelativeValue(a,h),typeof h=="number"&&(t[n]=a+(h-a)*s))}},i.prototype._handleRelativeValue=function(t,e){return typeof e!="string"?e:e.charAt(0)==="+"||e.charAt(0)==="-"?t+parseFloat(e):parseFloat(e)},i.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],r=this._valuesEnd[t];typeof r=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(r):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=e},i}(),At="18.6.4",bt=W.nextId,A=it,Et=A.getAll.bind(A),Ct=A.removeAll.bind(A),St=A.add.bind(A),Rt=A.remove.bind(A),It=A.update.bind(A),O={Easing:j,Group:et,Interpolation:S,now:C,Sequence:W,nextId:bt,Tween:Tt,VERSION:At,getAll:Et,removeAll:Ct,add:St,remove:Rt,update:It};class Mt extends O.Tween{constructor(t,e){super(t,e)}start(){return super.start(L.SharedTicker.deltaMS)}}const R=class{static init(){L.SharedTicker.add(this.update,this)}static update(){O.update()}static createTween(t,e={},r=R.defaultConfig){let s=this._setupConfig(r),n=new Mt(t);return n.to(e,s.duration*1e3),this._setupTween(n,s),n}static _setupConfig(t){return R.copyObject(t,R.copyObject(R.defaultConfig))}static copyObject(t,e={}){return Object.keys(t).forEach(r=>{e[r]=t[r]}),e}static _setupTween(t,e){t.delay(e.delay*1e3),t.repeatDelay(e.repeatDelay*1e3),e.loop?t.repeat(1/0):t.repeat(e.repeat),t.yoyo(e.yoyo),t.easing(e.easing),t.onStart(e.onStart),t.onRepeat(e.onRepeat),t.onStop(e.onStop),t.onUpdate(e.onUpdate),t.onComplete(e.onComplete)}static get Easing(){return O.Easing}};let $=R;b($,"defaultConfig",Object.freeze({duration:1,easing:O.Easing.Linear.None,loop:!1,yoyo:!1,delay:0,repeatDelay:0,repeat:0,onStart:()=>{},onRepeat:()=>{},onStop:()=>{},onUpdate:()=>{},onComplete:()=>{}}));const Q=class extends H{constructor(){super(),this.core=new mt}init(t,e=!0){$.init(),this.core.init(t),this.gl=this.core.gl,Q.Core=this.core,this.stage=new J,this.resizeCanvasToDisplaySize(),e&&this.setAutoResize(),D.register("Container",J),D.register("Vector2",T)}update(){this.emit("update"),this.updateTransform(),this.render()}updateTransform(){this.stage.updateTransform()}render(){this.clearCanvas(),this.stage.render()}setViewport(t,e,r,s){this.core.setViewport(t,e,r,s)}clearCanvas(t=v.BLACK){this.core.clearCanvas(t)}resizeCanvasToDisplaySize(t){let e=this.gl.canvas;t=t||1;const r=e.clientWidth*t|0,s=e.clientHeight*t|0;return e.width!==r||e.height!==s?(e.width=r,e.height=s,this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.clearCanvas(),this.stage.resetProjection(),!0):!1}setAutoResize(){window.addEventListener("resize",()=>{this.resizeCanvasToDisplaySize()})}};let U=Q;b(U,"Core",null);class tt{static addSrc(t){this.textureSrc.push(t)}static load(t,e,r){this.textureSrc.forEach(s=>{let n=new k(t,s);n.once("load",()=>{this._onTexureLoaded(s,n,e,r)})})}static _onTexureLoaded(t,e,r,s){B.add(t,e),this._countTextureLoaded++,this._countTextureLoaded===this.textureSrc.length&&r.call(s)}static addAnimationSprite(t,e,r="png"){for(let s=1;s<=e;s++)this.addSrc(`${t}${s}.${r}`)}}b(tt,"textureSrc",[]),b(tt,"_countTextureLoaded",0);const V=class extends k{static defaultFont(t){return this._defaultFont||(this._defaultFont=new V(t,{letterHeight:8,spaceWidth:8,spacing:-1,textureWidth:64,textureHeight:40,glyphInfos:{a:{x:0,y:0,width:8},b:{x:8,y:0,width:8},c:{x:16,y:0,width:8},d:{x:24,y:0,width:8},e:{x:32,y:0,width:8},f:{x:40,y:0,width:8},g:{x:48,y:0,width:8},h:{x:56,y:0,width:8},i:{x:0,y:8,width:8},j:{x:8,y:8,width:8},k:{x:16,y:8,width:8},l:{x:24,y:8,width:8},m:{x:32,y:8,width:8},n:{x:40,y:8,width:8},o:{x:48,y:8,width:8},p:{x:56,y:8,width:8},q:{x:0,y:16,width:8},r:{x:8,y:16,width:8},s:{x:16,y:16,width:8},t:{x:24,y:16,width:8},u:{x:32,y:16,width:8},v:{x:40,y:16,width:8},w:{x:48,y:16,width:8},x:{x:56,y:16,width:8},y:{x:0,y:24,width:8},z:{x:8,y:24,width:8},0:{x:16,y:24,width:8},1:{x:24,y:24,width:8},2:{x:32,y:24,width:8},3:{x:40,y:24,width:8},4:{x:48,y:24,width:8},5:{x:56,y:24,width:8},6:{x:0,y:32,width:8},7:{x:8,y:32,width:8},8:{x:16,y:32,width:8},9:{x:24,y:32,width:8},"-":{x:32,y:32,width:8},"*":{x:40,y:32,width:8},"!":{x:48,y:32,width:8},"?":{x:56,y:32,width:8}}},"/assets/images/font_default.png")),this._defaultFont}constructor(t,e,r){super(t,r),this.info=e,this.src=r}update(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.texture.image),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST)}};let G=V;b(G,"_defaultFont",null);export{v as C,U as E,G as F,tt as L,k as T,J as a,L as b,B as c,$ as d};
